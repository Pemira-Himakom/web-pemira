{"ast":null,"code":"var _jsxFileName = \"/Users/josiahfarrelsuwito/pemira/web-pemira-2022/client/src/context/authcontext.js\",\n  _s = $RefreshSig$();\nimport { createContext, useState, useContext } from \"react\";\nimport { UIContext } from \"./uicontext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext({\n  isLoggedIn: false,\n  login: () => {}\n});\nconst AuthContextProvider = props => {\n  _s();\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const uiCtx = useContext(UIContext);\n  async function login(input) {\n    const response = await fetch(\"http://localhost:3001/api/validate_token\", {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      method: \"POST\",\n      body: JSON.stringify(input)\n    });\n    if (response.ok) {\n      const data = await response.json();\n      if (data.status) {\n        uiCtx.setSuccess();\n        setInterval(() => {\n          setIsLoggedIn(true);\n        }, 1200);\n      } else {\n        if (data.message) {\n          uiCtx.setError(data.message);\n        } else {\n          uiCtx.setError(\"Your token is wrong!\");\n        }\n        setIsLoggedIn(false);\n      }\n    } else {\n      const responseData = await response.json();\n      console.log(responseData);\n      setIsLoggedIn(false);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      isLoggedIn,\n      login\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthContextProvider, \"2T/SKMvsucv7gNNNpbw/RDC0Bb0=\");\n_c = AuthContextProvider;\nexport default AuthContextProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthContextProvider\");","map":{"version":3,"names":["createContext","useState","useContext","UIContext","AuthContext","isLoggedIn","login","AuthContextProvider","props","setIsLoggedIn","uiCtx","input","response","fetch","headers","method","body","JSON","stringify","ok","data","json","status","setSuccess","setInterval","message","setError","responseData","console","log","children"],"sources":["/Users/josiahfarrelsuwito/pemira/web-pemira-2022/client/src/context/authcontext.js"],"sourcesContent":["import { createContext, useState, useContext } from \"react\";\nimport { UIContext } from \"./uicontext\";\n\nexport const AuthContext = createContext({\n  isLoggedIn: false,\n  login: () => {},\n});\n\nconst AuthContextProvider = props => {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const uiCtx = useContext(UIContext);\n\n  async function login(input) {\n    const response = await fetch(\"http://localhost:3001/api/validate_token\", {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      method: \"POST\",\n      body: JSON.stringify(input),\n    });\n\n    if (response.ok) {\n      const data = await response.json();\n      if (data.status) {\n        uiCtx.setSuccess();\n        setInterval(() => {\n          setIsLoggedIn(true);\n        }, 1200);\n      } else {\n        if (data.message) {\n          uiCtx.setError(data.message);\n        } else {\n          uiCtx.setError(\"Your token is wrong!\");\n        }\n\n        setIsLoggedIn(false);\n      }\n    } else {\n      const responseData = await response.json();\n      console.log(responseData);\n\n      setIsLoggedIn(false);\n    }\n  }\n\n  return (\n    <AuthContext.Provider value={{ isLoggedIn, login }}>\n      {props.children}\n    </AuthContext.Provider>\n  );\n};\n\nexport default AuthContextProvider;\n"],"mappings":";;AAAA,SAASA,aAAa,EAAEC,QAAQ,EAAEC,UAAU,QAAQ,OAAO;AAC3D,SAASC,SAAS,QAAQ,aAAa;AAAC;AAExC,OAAO,MAAMC,WAAW,gBAAGJ,aAAa,CAAC;EACvCK,UAAU,EAAE,KAAK;EACjBC,KAAK,EAAE,MAAM,CAAC;AAChB,CAAC,CAAC;AAEF,MAAMC,mBAAmB,GAAGC,KAAK,IAAI;EAAA;EACnC,MAAM,CAACH,UAAU,EAAEI,aAAa,CAAC,GAAGR,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAMS,KAAK,GAAGR,UAAU,CAACC,SAAS,CAAC;EAEnC,eAAeG,KAAK,CAACK,KAAK,EAAE;IAC1B,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,0CAA0C,EAAE;MACvEC,OAAO,EAAE;QACP,cAAc,EAAE;MAClB,CAAC;MACDC,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACP,KAAK;IAC5B,CAAC,CAAC;IAEF,IAAIC,QAAQ,CAACO,EAAE,EAAE;MACf,MAAMC,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAI,EAAE;MAClC,IAAID,IAAI,CAACE,MAAM,EAAE;QACfZ,KAAK,CAACa,UAAU,EAAE;QAClBC,WAAW,CAAC,MAAM;UAChBf,aAAa,CAAC,IAAI,CAAC;QACrB,CAAC,EAAE,IAAI,CAAC;MACV,CAAC,MAAM;QACL,IAAIW,IAAI,CAACK,OAAO,EAAE;UAChBf,KAAK,CAACgB,QAAQ,CAACN,IAAI,CAACK,OAAO,CAAC;QAC9B,CAAC,MAAM;UACLf,KAAK,CAACgB,QAAQ,CAAC,sBAAsB,CAAC;QACxC;QAEAjB,aAAa,CAAC,KAAK,CAAC;MACtB;IACF,CAAC,MAAM;MACL,MAAMkB,YAAY,GAAG,MAAMf,QAAQ,CAACS,IAAI,EAAE;MAC1CO,OAAO,CAACC,GAAG,CAACF,YAAY,CAAC;MAEzBlB,aAAa,CAAC,KAAK,CAAC;IACtB;EACF;EAEA,oBACE,QAAC,WAAW,CAAC,QAAQ;IAAC,KAAK,EAAE;MAAEJ,UAAU;MAAEC;IAAM,CAAE;IAAA,UAChDE,KAAK,CAACsB;EAAQ;IAAA;IAAA;IAAA;EAAA,QACM;AAE3B,CAAC;AAAC,GA1CIvB,mBAAmB;AAAA,KAAnBA,mBAAmB;AA4CzB,eAAeA,mBAAmB;AAAC;AAAA"},"metadata":{},"sourceType":"module"}